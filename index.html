<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<link rel="apple-touch-icon" sizes="57x57" href="img/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="img/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="img/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="img/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="img/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="img/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="img/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="img/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="img/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="img/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="img/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
	<link rel="manifest" href="/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="img/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
	<title>Box Office Tracker</title>
	<link href="css/bootstrap.min.css" rel="stylesheet">


	<style type="text/css">

	</style>

</head>
<body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<div class="container">

<h1>Box Office Tracker</h1>
<h3>CRUD application created by: Eric Tran <a href="mailto:eqtran@ucsd.edu" id="emailName">eqtran@ucsd.edu</a></h3>
<table id="movieGrid" class='table'>
<tr><th>Movie Title</th><th>Studio</th><th>Year</th><th>Box Office $</th><th>Picture</th></tr>
<!-- place holding -->

</table>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addModal">Add Record</button>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addModal">Update Record</button>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#deleteModal">Remove Record</button>



<!-- Add/Update Modal -->
<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="myModalLabel">Add/Update a Record</h4>
      </div>
      <div class="modal-body">
        <form id="addForm" class="form">
	 <div class="form-group">
	 	<label for="movie_title">Movie Title</label>
	 	<input type="text" name="movie_title" id="movie_title" value=""  class="form-control">
	 </div>

	 <div class="form-group">
	 	<label for="studio">Studio</label>
	 	<input type="text" name="studio" id="studio" value=""  class="form-control">
	 </div>

	<div class="form-group">
		<label for="year">Year</label>
		<input type="text" name="year" id="year" value=""  class="form-control">
	</div>

	<div class="form-group">
		<label for="box_office">Box Office $</label>
		<input type="text" name="box_office" id="box_office" value=""  class="form-control">
	</div>

	<div class="form-group">
		<label for="picture">Picture</label>
		<input type="text" name="picture" id="picture" value=""  class="form-control">
	</div>

	
	      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Add</button>
      </div>
    </div>
  </div>
</div>



<!-- Delete modal -->
<div id="deleteModal" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="deleteModalLabel">Confirm Delete</h4>
      </div>
      
      
      
      <div class="modal-footer">

      <form>
	  	<input type="hidden" name="user_id" id="deleteConfirm_user_id" value="">
	  	
	  	<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" id="deleteBtn" class="btn btn-primary" value="Delete">Delete</button>

       </form>
      </div>
      
    </div>
  </div>
</div>




</div>


<script src="js/bootstrap.min.js"></script>

<script type="text/javascript">

var movieWrapper = {};
		
	movieWrapper.loadData = function () {
		
	
		
		$.getJSON("./api.php", function(data) {
		
			    if (data.length == 0) {
				    $("#movieGrid").html("<tr><td colspan='5'>No Users</td></tr>");
			    } 

			    else {
				  
		
					  
					 $.each(data, function (index,value) {
					  
					  var str = "";
					  str += "<tr><td>"+value.title+"</td>";
					  str += "<td>"+value.studio+"</td>";
					  str += "<td>"+value.year+"</td>";
					  str += "<td>"+value.total+"</td>";
					  
					  
					 

					  str += "</tr>";

					  $(str).appendTo("#movieGrid");					
				  });
				}
   		});	
	}; /* loadData */

 // bind load events 
   $(document).ready(function () {
		
		movieWrapper.loadData();
		 
		
					
    });

</script>

</body>

</html>
